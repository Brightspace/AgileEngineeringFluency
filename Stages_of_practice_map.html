<!DOCTYPE html>
<html>
<head>
	<title>adaptive engineering proficiencies</title>
	<script type="text/javascript">
		function StagesDataModel() {
			this.data = {
				components: {
					V_CHECK_WORK: { name: "Check your work", color: "cornflowerblue" },
					V_CODE: { name: "Write good code", color: "limegreen" },
					V_SHIP: { name: "Ship", color: "mediumpurple" },
					V_REQUIREMENTS: { name: "Know what to build", color: "orange" },
					V_LEARN: { name: "Discipline and learning", color: "fuchsia" },
					V_IMPROVE: { name: "Improve as a Team", color: "darkred" },
					V_SUSTAINABLE: { name: "Not hurried", color: "rosybrown" }
				},

				levels: {
					L_TRADITIONAL: { name: "Traditional done well", range: [0, 4] },
					L_CORE: { name: "Core modern engineering", range: [5, 10] },
					L_LEVERAGE: { name: "Leverage new capabilities", range: [11, 13] },
					L_NO_DEBT: { name: "Eliminate debt and change the rules", range: [14, 18] },
					L_AWESOME: { name: "Take advantage of being awesome", range: [19, 24] }
				},

				dependency_kind: {
					IS_REQUIRED: { name: "Doing A is nearly required to do B", style: "solid" },
					IS_HELPFUL: { name: "Doing A helps a lot when doing B", style: "dotted" }
				},

				skills: {
					SK_QA: {
						x: 0, y: 0,
						name: "Quality Assurance",
						level: "L_TRADITIONAL",
						component: "V_CHECK_WORK",
						requires: [
						],
					},
					SK_DEV_CHECK: {
						x: 1, y: 0,
						name: "Developer Checking",
						level: "L_TRADITIONAL",
						component: "V_CHECK_WORK",
						requires: [
							 { skill: "SK_QA", kind: "IS_REQUIRED" }
						]
					},
					SK_AUTO_DEV_TEST: {
						x: 2, y: 0,
						name: "Automated developer testing",
						level: "L_CORE",
						component: "V_CHECK_WORK",
						requires: [
							 { skill: "SK_DEV_CHECK", kind: "IS_REQUIRED" }
						]
					},
					SK_TEST_FIRST: {
						x: 3, y: 0,
						name: "Test first",
						level: "L_CORE",
						component: "V_CHECK_WORK",
						requires: [
							 { skill: "SK_AUTO_DEV_TEST", kind: "IS_REQUIRED" }
						]
					},
					SK_TEST_UNITS: {
						x: 3, y: 1,
						name: "Test units",
						level: "L_CORE",
						component: "V_CHECK_WORK",
						requires: [
							{ skill: "SK_AUTO_DEV_TEST", kind: "IS_REQUIRED" },
							{ skill: "SK_WRITE_UNITS", kind: "IS_REQUIRED" }
						]
					},
					SK_WRITE_UNITS: {
						x: 2, y: 2,
						name: "Code in units",
						level: "L_CORE",
						component: "V_CODE",
						requires: [
							 { skill: "SK_LOCAL_REFACTORING", kind: "IS_REQUIRED" }
						]
					},
					SK_RGR: {
						x: 4, y: 0,
						name: "Red, green, refactor",
						level: "L_NO_DEBT",
						component: "V_CHECK_WORK",
						requires: [
							{ skill: "SK_TEST_FIRST", kind: "IS_REQUIRED" },
							{ skill: "SK_TEST_UNITS", kind: "IS_REQUIRED" }
						]
					},
					SK_TEST_LEGACY: {
						// 6
						x: 4, y: 2,
						name: "Legacy code under test",
						level: "L_NO_DEBT",
						component: "V_CHECK_WORK",
						requires: [
							 { skill: "SK_TEST_UNITS", kind: "IS_REQUIRED" }
						]
					},
					SK_TDDESIGN: {
						// 7
						x: 5, y: 0,
						name: "Test-driven design",
						level: "L_AWESOME",
						component: "V_CHECK_WORK",
						requires: [
							 { skill: "SK_RGR", kind: "IS_REQUIRED" }
						]
					},
					SK_FIX_LEGACY: {
						// 8
						x: 5, y: 2,
						name: "Legacy code recovery",
						level: "L_NO_DEBT",
						component: "V_CODE",
						requires: [
						{ skill: "SK_TEST_LEGACY", kind: "IS_REQUIRED" }
						]
					},
					SK_LISTEN_TO_CODE: {
						// 9
						x: 18, y: 0,
						name: "Code whispering",
						level: "L_AWESOME",
						component: "V_CODE",
						requires: [
							 { skill: "SK_YAGNI", kind: "IS_REQUIRED" }
						]
					},
					SK_SIMUL_PHASES: {
						// 10
						x: 6, y: 3,
						name: "Simultaneous Phases",
						level: "L_NO_DEBT",
						component: "V_CODE",
						requires: [
							{ skill: "SK_FIX_LEGACY", kind: "IS_REQUIRED" }
						]
					},
					SK_EVO_DESIGN: {
						// 11
						x: 6, y: 4,
						name: "Evolutionary Design",
						component: "V_CODE",
						level: "L_NO_DEBT",
						requires: [
							{ skill: "SK_TDDESIGN", kind: "IS_REQUIRED" },
							{ skill: "SK_FIX_LEGACY", kind: "IS_REQUIRED" },
							 { skill: "SK_GREENFIELD", kind: "IS_HELPFUL" }
						]
					},
					SK_NO_BUGS: {
						// 12
						x: 7, y: 4,
						name: "No bugs",
						component: "V_CODE",
						level: "L_NO_DEBT",
						requires: [
							{ skill: "SK_EVO_DESIGN", kind: "IS_REQUIRED" },
							{ skill: "SK_CONT_SHIP", kind: "IS_REQUIRED" }
						]
					},
					SK_YAGNI: {
						//13
						x: 8, y: 2,
						name: "YAGNI and simplest thing",
						component: "V_CODE",
						level: "L_NO_DEBT",
						requires: [
							{ skill: "SK_NO_BUGS", kind: "IS_REQUIRED" }
						]
					},
					SK_CONT_SHIP: {
						// 14
						x: 13, y: 2,
						name: "Continuous delivery",
						component: "V_SHIP",
						level: "L_AWESOME",
						requires: [
						]
					},
					SK_CONT_DEPLOY: {
						// 15
						x: 19, y: 3,
						name: "Continuous deployment",
						level: "L_AWESOME",
						component: "V_SHIP",
						requires: [
							{ skill: "SK_CONT_SHIP", kind: "IS_REQUIRED" }
						]
					},
					SK_GREENFIELD: {
						// 16
						x: 5, y: 3,
						name: "Greenfield project",
						level: "L_NO_DEBT",
						component: "V_CODE",
						requires: [
						]
					},
					SK_COWBOY: {
						// 17,
						name: "Cowboy coding",
						level: "L_TRADITIONAL",
						component: "V_CODE",
						enables: [
							 { skill: 18, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_BDUF: {
						id: 18,
						name: "Big design up front",
						level: "L_TRADITIONAL",
						component: "V_CODE",
						enables: [
							 { skill: 19, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_DESIGN_PATTERNS: {
						id: 19,
						name: "Pattern-oriented design",
						level: "L_TRADITIONAL",
						component: "V_CODE",
						enables: [
							 { skill: 20, kind: "IS_REQUIRED" },
							 { skill: 21, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_DRY: {
						id: 20,
						x: 7, y: 5,
						name: "Don't repeat yourself",
						level: "L_CORE",
						component: "V_CODE",
						enables: [
							 { skill: 25, kind: "IS_REQUIRED" },
						],
						requires: [
						]
					},
					SK_B_ARCHI_UF: {
						id: 21,
						x: 2, y: 4,
						name: "Just architecture up front",
						component: "V_CODE",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 22, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_PREDICTIVE_WITH_SMELLS: {
						id: 22,
						x: 3, y: 4,
						name: "Smell-based predictive design",
						component: "V_CODE",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 23, kind: "IS_REQUIRED" },
						],
						requires: [
						]
					},
					SK_ITERATED_PREDICTIVE: {
						id: 23,
						x: 4, y: 4,
						name: "Iterated predictive design",
						component: "V_CODE",
						level: "L_TRADITIONAL",
						requires: [
						]
					},
					SK_LOCAL_REFACTORING: {
						id: 24,
						x: 1, y: 3,
						name: "Local refactoring",
						component: "V_CODE",
						level: "L_CORE",
						enables: [
							 { skill: 4, kind: "IS_REQUIRED" },
							 { skill: 20, kind: "IS_REQUIRED" },
						],
						requires: [
						]
					},
					SK_REFLECTIVE_DESIGN: {
						id: 25,
						x: 6, y: 5,
						name: "Reflective design",
						component: "V_CODE",
						level: "L_CORE",
						enables: [
							 { skill: 5, kind: "IS_REQUIRED" },
							 { skill: 8, kind: "IS_REQUIRED" },
							 { skill: 11, kind: "IS_REQUIRED" },
						],
						requires: [
						]
					},
					SK_MANUAL_PACKAGE: {
						id: 26,
						x: 0, y: 8,
						name: "Manual build and package",
						component: "V_SHIP",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 27, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_AUTO_PACKAGE: {
						id: 27,
						x: 1, y: 8,
						name: "Automated package",
						component: "V_SHIP",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 28, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_AUTO_BUILD_VERIFY: {
						id: 28,
						x: 5, y: 8,
						name: "Automated build verification",
						component: "V_SHIP",
						level: "L_CORE",
						enables: [
							 { skill: 2, kind: "IS_REQUIRED" },
							 { skill: 29, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_AUTO_DEPLOY: {
						id: 29,
						x: 18, y: 10,
						name: "Automated deploy",
						component: "V_SHIP",
						level: "L_LEVERAGE",
						enables: [
							 { skill: 30, kind: "IS_REQUIRED" },
							 { skill: 31, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_FEATURE_ISOLATION: {
						id: 30,
						x: 18, y: 10,
						name: "Feature isolation",
						component: "V_SHIP",
						level: "L_AWESOME",
						enables: [
							 { skill: 14, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_AUTO_DEPLOY_VERIFY: {
						id: 31,
						x: 18, y: 10,
						name: "Automated deploy verification",
						component: "V_SHIP",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 32, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_AUTO_ROLLBACK: {
						id: 32,
						x: 18, y: 10,
						name: "Automated rollback",
						component: "V_SHIP",
						level: "L_AWESOME",
						enables: [
							 { skill: 15, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_BUILD_FOR_ME: {
						id: 33,
						x: 18, y: 10,
						name: "Build for myself",
						component: "V_REQUIREMENTS",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 34, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_REQUIREMENTS: {
						id: 34,
						x: 18, y: 10,
						name: "Product requirements",
						component: "V_REQUIREMENTS",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 35, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_SLACK: {
						id: 35,
						x: 18, y: 10,
						name: "Build slack in",
						component: "V_REQUIREMENTS",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 36, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_SMALL_SPECS: {
						id: 36,
						x: 18, y: 10,
						name: "Small specs",
						component: "V_REQUIREMENTS",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 2, kind: "IS_REQUIRED" },
							 { skill: 37, kind: "IS_REQUIRED" },
							 { skill: 40, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_STORIES: {
						id: 37,
						x: 18, y: 10,
						name: "Stories",
						component: "V_REQUIREMENTS",
						level: "L_LEVERAGE",
						enables: [
							 { skill: 3, kind: "IS_HELPFUL" },
							 { skill: 38, kind: "IS_REQUIRED" },
							 { skill: 39, kind: "IS_REQUIRED" },
							 { skill: 40, kind: "IS_HELPFUL" }
						],
						requires: [
						]
					},
					SK_VERIFY_EXAMPLES: {
						id: 38,
						x: 18, y: 10,
						name: "Verify examples",
						component: "V_REQUIREMENTS",
						level: "L_AWESOME",
						enables: [
							 { skill: 3, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_STORY_CLUSTERING: {
						id: 39,
						x: 18, y: 10,
						name: "Story clustering",
						component: "V_REQUIREMENTS",
						level: "L_LEVERAGE",
						enables: [
							 { skill: 41, kind: "IS_REQUIRED" },
							 { skill: 43, kind: "IS_REQUIRED" },
							 { skill: 42, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_ADAPTIVE_PLANNING: {
						id: 40,
						x: 18, y: 10,
						name: "Adaptive planning",
						component: "V_REQUIREMENTS",
						level: "L_LEVERAGE",
						enables: [
							 { skill: 42, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_HYPOTHESIS_STORIES: {
						id: 41,
						x: 18, y: 10,
						name: "Hypothesis stories",
						component: "V_REQUIREMENTS",
						level: "L_AWESOME",
						enables: [
							 { skill: 82, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_ROLLING_WAVE_PLANNING: {
						id: 42,
						x: 18, y: 10,
						name: "Rolling-wave planning",
						component: "V_REQUIREMENTS",
						level: "L_LEVERAGE",
						enables: [
						],
						requires: [
						]
					},
					SK_EXPERIENCE_FOCUS: {
						id: 43,
						x: 18, y: 10,
						name: "Experience focus",
						component: "V_REQUIREMENTS",
						level: "L_AWESOME",
						enables: [
							 { skill: 44, kind: "IS_REQUIRED" },
							 { skill: 46, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_METRICS_FOCUS: {
						id: 44,
						x: 18, y: 10,
						name: "Business metric focus",
						component: "V_REQUIREMENTS",
						level: "L_AWESOME",
						enables: [
							 { skill: 45, kind: "IS_REQUIRED" },
						],
						requires: [
						]
					},
					SK_LEAN_STARTUP: {
						id: 45,
						x: 18, y: 10,
						name: "Lean startup",
						component: "V_REQUIREMENTS",
						level: "L_AWESOME",
						requires: [
						]
					},
					SK_WHOLE_TEAM_BUSINESS: {
						id: 46,
						x: 18, y: 10,
						name: "Whole team business innovation",
						component: "V_REQUIREMENTS",
						level: "L_AWESOME",
						enables: [
							 { skill: 45, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_HELP_AD_HOC: {
						id: 47,
						x: 18, y: 10,
						name: "Ad-hoc helping",
						component: "V_LEARN",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 48, kind: "IS_REQUIRED" },
							 { skill: 52, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_TEAM_LEADS: {
						id: 48,
						x: 18, y: 10,
						name: "Team leads",
						component: "V_LEARN",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 49, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_FORMAL_TRAINING: {
						id: 49,
						x: 18, y: 10,
						name: "Formal training",
						component: "V_LEARN",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 50, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_CODE_REVIEW: {
						id: 50,
						x: 18, y: 10,
						name: "Code review",
						component: "V_LEARN",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 51, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_CODE_PREVIEW: {
						id: 51,
						x: 18, y: 10,
						name: "Code preview",
						component: "V_LEARN",
						level: "L_TRADITIONAL",
						enables: [
						],
						requires: [
						]
					},
					SK_SHARED_CODE: {
						id: 52,
						x: 18, y: 10,
						name: "Shared code responsibility",
						component: "V_LEARN",
						level: "L_CORE",
						enables: [
							 { skill: 53, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_T_SHAPED: {
						id: 53,
						x: 18, y: 10,
						name: "T-shaped people",
						component: "V_LEARN",
						level: "L_CORE",
						enables: [
							 { skill: 54, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_COLLECTIVE_OWNERSHIP: {
						id: 54,
						x: 18, y: 10,
						name: "Collective ownership",
						component: "V_LEARN",
						level: "L_CORE",
						enables: [
							 { skill: 8, kind: "IS_REQUIRED" },
							 { skill: 57, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_SIT_TOGETHER: {
						id: 55,
						x: 18, y: 10,
						name: "Sit together",
						component: "V_LEARN",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 53, kind: "IS_HELPFUL" },
							 { skill: 56, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_PAIR_OCCASIONAL: {
						id: 56,
						x: 18, y: 10,
						name: "Pairing to solve hard problems",
						component: "V_LEARN",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 54, kind: "IS_HELPFUL" },
							 { skill: 57, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_PAIR_REGULARLY: {
						id: 56,
						x: 18, y: 10,
						name: "Pairing to learn",
						component: "V_LEARN",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 54, kind: "IS_HELPFUL" },
							 { skill: 57, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_PAIR_PRODUCTION: {
						id: 57,
						x: 18, y: 10,
						name: "Pairing for productivity",
						component: "V_LEARN",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 58, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_PAIR_ALWAYS: {
						id: 58,
						x: 18, y: 10,
						name: "Pairing for discipline",
						component: "V_LEARN",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 11, kind: "IS_HELPFUL" },
							 { skill: 12, kind: "IS_REQUIRED" },
							 { skill: 59, kind: "IS_REQUIRED" },
							 { skill: 71, kind: "IS_REQUIRED" },
							 { skill: 60, kind: "IS_HELPFUL" }
						],
						requires: [
						]
					},
					SK_M_SHAPED: {
						id: 59,
						x: 18, y: 10,
						name: "M-shaped people",
						component: "V_LEARN",
						level: "L_AWESOME",
						enables: [
							 { skill: 46, kind: "IS_REQUIRED" },
							 { skill: 61, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_MOBS: {
						id: 60,
						x: 18, y: 10,
						name: "Mobbing",
						component: "V_LEARN",
						level: "L_AWESOME",
						enables: [
							 { skill: 12, kind: "IS_HELPFUL" },
							 { skill: 61, kind: "IS_HELPFUL" }
						],
						requires: [
						]
					},
					SK_UNIVERSAL_SPECIALIST: {
						id: 61,
						x: 18, y: 10,
						name: "Full-product specialization",
						component: "V_LEARN",
						level: "L_AWESOME",
						requires: [
						]
					},
					SK_STASIS: {
						id: 62,
						x: 18, y: 10,
						name: "Stasis",
						component: "V_IMPROVE",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 63, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_CENTRAL_PROCESS: {
						id: 63,
						x: 18, y: 10,
						name: "Centralized improvement",
						component: "V_IMPROVE",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 64, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_POST_MORTEM: {
						id: 64,
						x: 18, y: 10,
						name: "Post-mortems",
						component: "V_IMPROVE",
						level: "L_TRADITIONAL",
						enables: [
							 { skill: 65, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_RETROS: {
						id: 65,
						x: 18, y: 10,
						name: "Retrospectives",
						component: "V_IMPROVE",
						level: "L_CORE",
						enables: [
							 { skill: 66, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_ACTION_RETROS: {
						id: 66,
						x: 18, y: 10,
						name: "Action-based retrospectives",
						component: "V_IMPROVE",
						level: "L_CORE",
						enables: [
							 { skill: 67, kind: "IS_REQUIRED" },
							 { skill: 68, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_LEARN_LOCALLY: {
						id: 67,
						x: 18, y: 10,
						name: "Learn from local cmm'ty",
						component: "V_IMPROVE",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 68, kind: "IS_HELPFUL" },
							 { skill: 69, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_PROCESS_EXPERIMENTS: {
						id: 68,
						x: 18, y: 10,
						name: "Process experiments",
						component: "V_IMPROVE",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 70, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_LEARN_ALL: {
						id: 69,
						x: 18, y: 10,
						name: "Learn from everyone",
						component: "V_IMPROVE",
						level: "L_NO_DEBT",
						enables: [
							 { skill: 70, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_PROCESS_INNOVATION: {
						id: 70,
						x: 18, y: 10,
						name: "Useful innovation",
						component: "V_IMPROVE",
						level: "L_AWESOME",
						requires: [
						]
					},
					SK_RADICAL_COLLABORATE: {
						id: 71,
						x: 18, y: 10,
						name: "Radical collaboration",
						component: "V_LEARN",
						level: "L_AWESOME",
						requires: [
						]
					},
					SK_DEATH_MARCH: {
						id: 72,
						x: 18, y: 10,
						name: "Death marches",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 74, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_TRACK_CAPACITY: {
						id: 73,
						x: 18, y: 10,
						name: "Track capacity",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 76, kind: "IS_REQUIRED" },
							 { skill: 77, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_WATERFALL_MILESTONES: {
						id: 74,
						x: 18, y: 10,
						name: "Waterfall milestones",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 75, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_ITERATION: {
						id: 75,
						x: 18, y: 10,
						name: "Iterations with self",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 77, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_RELATIVE_ESTIMATES: {
						id: 76,
						x: 18, y: 10,
						name: "Relative based estimation",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 78, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_LIMIT_WORK_TO_CAPACITY: {
						id: 77,
						x: 18, y: 10,
						name: "Limit work to estimated capacity",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 78, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_DATA_DRIVEN_CAPACITY: {
						id: 78,
						x: 18, y: 10,
						name: "Use data to determine capacity",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 79, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_PULL: {
						id: 79,
						x: 18, y: 10,
						name: "Pull systems",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 80, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_LIMIT_WORK_CONTINUOUS: {
						id: 80,
						x: 18, y: 10,
						name: "WIP limits",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 81, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_SINGLE_PIECE_FLOW: {
						id: 81,
						x: 18, y: 10,
						name: "Single piece flow",
						component: "V_SUSTAINABLE",
						level: "L_UNASSIGNED",
						enables: [
							 { skill: 71, kind: "IS_REQUIRED" },
							 { skill: 10, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					},
					SK_TIP: {
						id: 82,
						x: 18, y: 10,
						name: "Testing in production",
						component: "V_REQUIREMENTS",
						level: "L_AWESOME",
						enables: [
							 { skill: 14, kind: "IS_REQUIRED" },
							 { skill: 44, kind: "IS_REQUIRED" }
						],
						requires: [
						]
					}
				}
			};

			this.populateCanvas = function () {
				var parsedData;
				try {
					parsedData = JSON.parse(document.getElementById("jsonInput").value);
				} catch (err) {
					return;
				}

				var skills = parsedData.skills;
				var components = parsedData.components;

				var linksCanvas = document.getElementById("skillsCanvas");
				var ctx = linksCanvas.getContext("2d");
				ctx.clearRect(0, 0, linksCanvas.width, linksCanvas.height);
				ctx.translate(0.5, 0.5);
				var debugCanvas = document.getElementById("debugCanvas");
				var debugCtx = debugCanvas.getContext("2d");
				debugCtx.clearRect(0, 0, debugCanvas.width, debugCanvas.height);

				var skillId;
				var skill;

				// draw links
				for (skillId in skills) {
					skill = skills[skillId];

					if (skill.requires == null)
						continue;

					for (var j = 0, m = skill.requires.length; j < m; j++) {
						var requirement = skill.requires[j];
						var destinationSkill = skills[requirement.skill];

						drawLink(ctx, debugCtx, skill, destinationSkill, components[skill.component].color);
					}
				}

				// draw circles
				for (skillId in skills) {
					skill = skills[skillId];

					var point = translatePoint(skill);

					drawSkillName(ctx, skill.name, point);

					ctx.beginPath();
					ctx.strokeStyle = "black";
					ctx.fillStyle = components[skill.component].color;
					ctx.lineWidth = "3";
					ctx.arc(point.x, point.y, 10, 0, Math.PI * 2, true);
					ctx.fill();
					ctx.stroke();
				}
			}

			function translatePoint(point) {
				// here 2500 is assumed to be the width of the canvas
				return { x: ((point.x * 50) + 60), y: (point.y * 50) + 60 };
			}

			function drawLink(ctx, debugCtx, sourceSkill, destinationSkill, color) {
				var start = translatePoint(sourceSkill);
				var end = translatePoint(destinationSkill);

				var bezierPoints = calculateBezierControlPoints(start, end);

				// draw bezier curve
				drawBezierCurve(ctx, start, bezierPoints.cp1, bezierPoints.cp2, end, color);

				// draw bounding box hints
				drawBezierCurveBoundingBoxLines(debugCtx, start, end);

				// draw control point hints
				drawCircle(debugCtx, bezierPoints.cp1, 4);
				drawCircle(debugCtx, bezierPoints.cp2, 4);

				// label point coordinates
				drawPointCoordinatesText(debugCtx, "start", start);
				drawPointCoordinatesText(debugCtx, "cp1", bezierPoints.cp1);
				drawPointCoordinatesText(debugCtx, "cp2", bezierPoints.cp2);
				drawPointCoordinatesText(debugCtx, "end", end);
			}

			function calculateBezierControlPoints(start, end) {
				var xBias = 0.5; // change this to set how much the line should be "pulled" on the x-axis
				var yBias = 0.5; // change this to set how much the line should be "pulled" on the y-axis

				var dx = end.x - start.x;
				var dy = end.y - start.y;

				var center = { x: start.x + (dx / 2), y: start.y + (dy / 2) };

				var xOffset = (dx / 2) * xBias;
				var yOffset = (dy / 2) * yBias;

				// these are the control points
				var cp1 = { x: center.x + xOffset, y: center.y - yOffset };
				var cp2 = { x: center.x - xOffset, y: center.y + yOffset };

				return { cp1: cp1, cp2: cp2 };
			}

			function drawBezierCurve(ctx, start, cp1, cp2, end, color) {
				ctx.beginPath();
				ctx.strokeStyle = color;
				ctx.lineWidth = "5";
				ctx.moveTo(start.x, start.y);
				ctx.bezierCurveTo(cp1.x, cp1.y, cp2.x, cp2.y, end.x, end.y);
				ctx.stroke();
			}

			function drawBezierCurveBoundingBoxLines(ctx, start, end) {
				ctx.beginPath();
				ctx.strokeStyle = "gray";
				ctx.lineWidth = "0.5";
				ctx.moveTo(start.x, start.y);
				ctx.lineTo(start.x, end.y);
				ctx.lineTo(end.x, end.y);
				ctx.lineTo(end.x, start.y);
				ctx.lineTo(start.x, start.y);
				ctx.lineTo(end.x, end.y);
				ctx.moveTo(end.x, start.y);
				ctx.lineTo(start.x, end.y);
				ctx.stroke();
			}

			function drawSkillName(ctx, name, point) {
				ctx.font = "14px segui";
				ctx.textAlign = "left";
				ctx.textBaseline = "middle";
				ctx.fillStyle = "black";

				ctx.beginPath();
				ctx.fillText(name, point.x + 10, point.y - 15);
				ctx.fill();
			}

			function drawPointCoordinatesText(ctx, text, point) {
				ctx.font = "10px segui";
				ctx.textAlign = "left";
				ctx.textBaseline = "middle";

				ctx.beginPath();
				ctx.fillText(text + ": (" + point.x + "," + point.y + ")", point.x + 10, point.y + 5);
				ctx.stroke();
			}

			function drawCircle(ctx, center, radius) {
				ctx.beginPath();
				ctx.strokeStyle = "black";
				ctx.lineWidth = "1";
				ctx.arc(center.x, center.y, radius, 0, Math.PI, true);
				ctx.arc(center.x, center.y, radius, Math.PI, Math.PI * 2, true);
				ctx.stroke();
			}

			var json = JSON.stringify(this.data, undefined, 2);
			document.getElementById("jsonInput").value = json;

			var model = this;
			this.view_model = {
				update: function () {
					model.populateCanvas();
				},
				close_options: function () {
					window.ui.hideOptions();
				},
				open_options: function () {
					window.ui.showOptions();
				}
			};
		};

		function OptionsPane() {
			var pane = document.getElementById("options_pane");
			this.showOptions = function () {
				pane.style["display"] = "block";
			};
			this.hideOptions = function () {
				pane.style["display"] = "none";
			};
		}
	</script>
	<script type="text/javascript" src="knockout-3.0.0.js">
	</script>
	<script type="text/javascript">
		function start() {
			var stages_data = new StagesDataModel();
			ko.applyBindings(stages_data.view_model);
			window.visualizer = stages_data;
			window.visualizer.populateCanvas();
			window.ui = new OptionsPane();
		}
	</script>
	<style>
		html, body, div {
			margin: 0;
			padding: 0;
			border: 0 solid black;
		}

		html, body {
			height: 100%;
			width: 100%;
		}

		.display_port {
			position: relative;
		}

		.canvas {
			background-color: transparent;
			position: absolute;
		}

		.drawing {
			z-index: 0;
		}

		.debug {
			z-index: 1000;
			display: none;
		}

		#options_pane {
			position: fixed;
			z-index: 2;
			left: 0;
			bottom: 0;
			width: 100%;
			background-color: white;
			display: none;
			border-top: 1px solid black;
			padding: 0.2em;
		}

		#main_pane {
			position: relative;
			z-index: 0;
		}

		.options_corner {
			position: fixed;
			z-index: 1;
			bottom: 0;
			left: 0;
			height: 30px;
			width: 30px;
		}
	</style>
</head>
<body onload="start();">
	<div id="app_with_options" class="display_port">
		<div id="main_pane">
			<canvas id="skillsCanvas" width="2500" height="1200" class="drawing canvas"></canvas>
			<canvas id="debugCanvas" width="2500" height="1200" class="debug canvas"></canvas>
		</div>
		<img class="options_corner" src="page-fold.png" data-bind="click: open_options" />
		<div id="options_pane">
			<p>Enter JSON data here to update the diagram
			<button data-bind="click: update" style="margin-left:2em;">Apply</button>
			<button data-bind="click: close_options" style="margin-left:2em;">Close</button>
			</p>
			<textarea id="jsonInput" cols="120" rows="20" style="clear:both;"></textarea>
		</div>
	</div>
</body>
</html>
